{"version":3,"file":"console.js","sources":["../src/console-manager.js","../src/console-view.js","../src/console.js"],"sourcesContent":["import { Emitter } from 'event-kit';\n\nexport default class ConsoleManager {\n  constructor(view) {\n    this.view = view;\n    this.emitter = new Emitter();\n  }\n\n  destroy() {\n    this.emitter.dispose();\n  }\n\n  // Toggle console panel\n  toggle() {\n    this.view.toggle();\n  }\n\n  stickBottom() {\n    this.view.stickTop = false;\n  }\n\n  stickTop() {\n    this.view.stickTop = true;\n  }\n\n  // Log message with default level\n  log(message, level = 'info') {\n    this.view.log(message, level);\n  }\n\n  // Log error\n  error(message) {\n    this.log(message, 'error');\n  }\n\n  // Log warning\n  warn(message) {\n    this.log(message, 'warn');\n  }\n\n  // Log notice\n  notice(message) {\n    this.log(message, 'notice');\n  }\n\n  // Log debug message\n  debug(message) {\n    this.log(message, 'debug');\n  }\n\n  // Log raw text\n  raw(rawText, level, lineEnding) {\n    if (level === null) {\n      level = 'info';\n    }\n    if (lineEnding === null) {\n      lineEnding = '\\n';\n    }\n    rawText.split(lineEnding).forEach((line) => {\n      this.log(line, level);\n    });\n  }\n\n  // Clear console panel\n  clear() {\n    this.view.clear();\n  }\n}\n","import { $$, View } from 'atom-space-pen-views';\n\nexport default class ConsoleView extends View {\n  static content() {\n    this.div({ id: 'atom-console' }, () => {\n      this.div({ class: 'panel-body view-scroller', outlet: 'body' }, () => {\n        this.pre({\n          class: 'native-key-bindings',\n          outlet: 'output',\n          tabindex: -1,\n        });\n      });\n    });\n  }\n\n  // Tear down any state and detach\n  destroy() {\n    if (this.disposables !== null) {\n      this.disposables.dispose();\n    }\n  }\n\n  getTitle() {\n    return 'Console';\n  }\n\n  getPath() {\n    return 'console';\n  }\n\n  getUri() {\n    return `particle-dev://editor/${this.getPath()}`;\n  }\n\n  getDefaultLocation() {\n    return 'bottom';\n  }\n\n  show() {\n    atom.workspace.open(this, { activatePane: false });\n    atom.workspace.getBottomDock().show();\n  }\n\n  hide() {\n    atom.workspace.getBottomDock().hide();\n  }\n\n  toggle() {\n    atom.workspace.toggle(this);\n  }\n\n  log(message, level) {\n    const at_bottom =\n      this.body.scrollTop() + this.body.innerHeight() + 10 >\n      this.body[0].scrollHeight;\n\n    if (typeof message === 'string') {\n      this.output.append(\n        $$(function () {\n          this.p({ class: `level-${level}` }, message);\n        })\n      );\n    } else {\n      this.output.append(message);\n    }\n\n    if (at_bottom && !this.stickTop) {\n      this.body.scrollTop(this.body[0].scrollHeight);\n    } else if (this.stickTop) {\n      this.body.scrollTop(0);\n    }\n    if (atom.config.get('console-panel.show') === true) {\n      this.show();\n    }\n  }\n\n  clear() {\n    this.output.empty();\n    this.hide();\n  }\n}\n","import { CompositeDisposable } from 'atom';\nimport ConsoleManager from './console-manager';\nimport ConsoleView from './console-view';\nimport packageConfig from './config/config-schema.json';\n\nexport default {\n  config: packageConfig,\n\n  consoleView: null,\n  subscriptions: null,\n\n  activate() {\n    this.consoleView = new ConsoleView();\n    this.consoleManager = new ConsoleManager(this.consoleView);\n\n    // Events subscribed to in atom's system can be easily cleaned up with a CompositeDisposable\n    this.subscriptions = new CompositeDisposable();\n\n    // Register command that toggles this view\n    this.subscriptions.add(\n      atom.commands.add('atom-workspace', {\n        'console:toggle': () => this.consoleManager.toggle(),\n      })\n    );\n  },\n\n  deactivate() {\n    this.subscriptions.dispose();\n    this.consoleView.destroy();\n  },\n\n  provideConsolePanel() {\n    return this.consoleManager;\n  },\n\n  consumeToolBar(toolBar) {\n    this.toolBar = toolBar('console-tool-bar');\n\n    this.toolBar.addButton({\n      icon: 'align-left',\n      iconset: 'fi',\n      tooltip: 'Toggle Console',\n      callback: 'console:toggle',\n      priority: 600,\n    });\n  },\n};\n"],"names":["ConsoleManager","constructor","view","emitter","Emitter","destroy","dispose","toggle","stickBottom","stickTop","log","message","level","error","warn","notice","debug","raw","rawText","lineEnding","split","forEach","line","clear","ConsoleView","View","content","div","id","class","outlet","pre","tabindex","disposables","getTitle","getPath","getUri","getDefaultLocation","show","atom","workspace","open","activatePane","getBottomDock","hide","at_bottom","body","scrollTop","innerHeight","scrollHeight","output","append","$$","p","config","get","empty","packageConfig","consoleView","subscriptions","activate","consoleManager","CompositeDisposable","add","commands","deactivate","provideConsolePanel","consumeToolBar","toolBar","addButton","icon","iconset","tooltip","callback","priority"],"mappings":"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"}